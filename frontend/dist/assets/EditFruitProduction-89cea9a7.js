import{S as _,a as N,R as h,r as c,f as S,u as D,j as e,h as R}from"./index-217676aa.js";const C=f=>{var b,x;const{setIsLoading:n,Spinner:k}=_(),m=N(t=>t.user.value),{allRequest:y}=h(),[s,T]=c.useState(f.componentData),[i,v]=c.useState([]);h();const{MessageBox:g,setFormMessage:p}=S();c.useState(!1);const{fetchApi:j}=R(),{t:r}=D(),[d,u]=c.useState({date:"",section_id:"",status:"",cause_id:"",deviation_type_id:""});c.useEffect(()=>{(async(a,o)=>{n(!0),y({event:null,action_url:a,method:"GET",formId:"",formData:null,contentType:"application/json",authentication:m.token,setIsLoading:n,setReturnData:o})})("fruit_production_form_related_data",v),u({date:new Date(s.date).toISOString().split("T")[0],section_id:s.section_id,status:s.status,cause_id:s.cause_id,deviation_type_id:s.deviation_type_id})},[]);const l=t=>{const{name:a,value:o}=t.target;u(w=>({...w,[a]:o}))};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"border-b border-stroke py-2 dark:border-strokedark",children:e.jsxs("h3",{className:"font-medium text-black dark:text-white",children:[r("update")," ",r("fruit_production")," ",r("values")]})}),e.jsx(g,{}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),n(!0),j({url:"fruitproduction/"+s.id,method:"PUT",formData:d,contentType:"application/json",authentication:m.token}).then(a=>{const o=JSON.parse(a);n(!1),o.status=="1"&&(u({date:"",section:"",status:"",cause:"",deviation_type:""}),p({message:o.message,status:"success"}),setTimeout(()=>{window.location.reload()},1500))}).catch(a=>{n(!1),p({message:JSON.parse(a),status:"error"})})},action:"#",id:"editFruitProdution",method:"POST",children:[e.jsx(k,{}),e.jsxs("div",{className:"mb-4.5 flex flex-row gap-6 xl:flex-row",children:[e.jsxs("div",{className:"w-1/2 xl:w-1/2",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"mb-1 text-sm block text-black dark:text-white",children:r("date")}),e.jsx("input",{type:"date",name:"date",value:d.date,onChange:l,className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-1 px-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"mb-1 text-sm block text-black dark:text-white",children:r("section")}),e.jsxs("select",{className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-1 px-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary",value:d.section_id,required:!0,name:"section_id",onChange:l,children:[e.jsx("option",{value:"",children:"--Select--"}),(b=i.fruits)==null?void 0:b.original.data.map((t,a)=>e.jsx("option",{value:t.id,children:r(t.name_key)},a))]}),e.jsx("label",{className:"mb-1 text-sm block text-black dark:text-white",children:r("status")}),e.jsxs("select",{className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-1 px-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary",value:d.status,onChange:l,required:!0,name:"status",children:[e.jsx("option",{value:"",children:"--Select--"}),i.statuses&&i.statuses.original.data.map((t,a)=>e.jsx("option",{value:t.id,children:r(t.name_key)},a))]})]})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"mb-1 text-sm text-black dark:text-white",children:r("cause")}),e.jsxs("select",{className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-1 px-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary",required:!0,value:d.cause_id,name:"cause_id",onChange:l,children:[e.jsx("option",{value:"",children:"--Select--"}),i.causes&&i.causes.original.data.map((t,a)=>e.jsx("option",{value:t.id,children:r(t.name_key)},a))]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"mb-1 text-sm text-black dark:text-white",children:r("deviation_type")}),e.jsxs("select",{className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-1 px-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary",value:d.deviation_type_id,onChange:l,required:!0,name:"deviation_type_id",children:[e.jsx("option",{value:"",children:"--Select--"}),(x=i.deviation_types)==null?void 0:x.original.data.map((t,a)=>e.jsx("option",{value:t.id,children:r(t.name_key)},a))]})]})]})]}),e.jsx("button",{type:"submit",className:"flex w-full justify-center rounded-xl  bg-cyan-800 p-2 font-medium text-gray hover:bg-opacity-90",children:r("save")})]})]})})})};export{C as default};
